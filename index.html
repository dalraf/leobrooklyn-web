<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>Leo Brooklin Stories - Web</title>
    <link rel="icon" href="./favicon.png" />
    <!-- Phaser 3 via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.0/dist/phaser.min.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        background: #000;
        height: 100%;
        overflow: hidden;
        touch-action: manipulation;
      }
      #game-container {
        position: relative;   /* permite overlay/HUD sobre o canvas */
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
      .hud {
        position: absolute;
        top: 0.75rem;
        left: 0.75rem;
        color: #fff;
        font-family: sans-serif;
        font-size: clamp(12px, 1.8vw, 18px); /* responsivo */
        text-shadow: 0 1px 2px rgba(0,0,0,0.6);
        z-index: 10;
        pointer-events: none;
        user-select: none;
      }
      .overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-family: sans-serif;
        flex-direction: column;
        gap: 12px;
        background: rgba(0,0,0,0.25);
        z-index: 20;
        padding: 16px;
        text-align: center;
      }
      .overlay button {
        pointer-events: auto;
        padding: 10px 16px;
        border-radius: 6px;
        border: none;
        background: #2d7ef7;
        color: #fff;
        font-weight: 600;
        cursor: pointer;
      }
    /* --- Controles Touch --- */
    #touch-controls {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 30;
    }
    /* Joystick base e knob */
    .joystick {
      position: absolute;
      left: 16px;
      bottom: 16px;
      width: 180px;
      height: 180px;
      pointer-events: auto;
      touch-action: none;
    }
    .joy-base {
      position: absolute;
      left: 0; top: 0;
      width: 100%; height: 100%;
      border-radius: 50%;
      background: radial-gradient(ellipse at center, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border: 2px solid rgba(255,255,255,0.25);
      box-shadow: inset 0 0 12px rgba(0,0,0,0.45);
    }
    .joy-knob {
      position: absolute;
      left: 50%; top: 50%;
      width: 72px; height: 72px;
      margin-left: -36px; margin-top: -36px;
      border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.35), rgba(255,255,255,0.12));
      border: 2px solid rgba(255,255,255,0.45);
      box-shadow: 0 4px 12px rgba(0,0,0,0.45);
      transition: transform 60ms ease-out;
    }

    /* Remove D-Pad antigo visualmente se existir */
    #dpad { display: none !important; }

    /* Ações */
    #action-area {
      position: absolute;
      right: 16px;
      bottom: 16px;
      width: 220px;
      height: 160px;
      pointer-events: none;
    }
    .tc-btn {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(255,255,255,0.15);
      border: 2px solid rgba(255,255,255,0.35);
      pointer-events: auto;
      touch-action: none;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-family: monospace;
      user-select: none;
    }
    #btn-shoot {
      right: 16px; bottom: 16px;
      background: rgba(80,160,255,0.2); border-color: rgba(80,160,255,0.5);
    }
    #btn-attack {
      right: 112px; bottom: 48px;
      background: rgba(255,120,80,0.2); border-color: rgba(255,120,80,0.5);
    }

    @media (max-width: 420px) {
      .joystick { width: 160px; height: 160px; }
      .joy-knob { width: 64px; height: 64px; margin-left: -32px; margin-top: -32px; }
      .tc-btn { width: 68px; height: 68px; }
    }
    </style>
  </head>
  <body>
    <div id="game-container">
      <!-- Controles Touch sobre o canvas -->
      <div id="touch-controls" aria-hidden="false">
        <div class="joystick" id="joystick">
          <div class="joy-base"></div>
          <div class="joy-knob" id="joy-knob"></div>
        </div>
        <div id="action-area">
          <div id="btn-shoot" class="tc-btn" data-action="shoot">A</div>
          <div id="btn-attack" class="tc-btn" data-action="attack">B</div>
        </div>
      </div>
    </div>

    <div class="hud" id="hud">Placar: 0  Vida: 0  Pedras: 0</div>

    <div class="overlay" id="overlay">
      <div style="font-size:22px;">Pressione ENTER para continuar</div>
      <div>Setas Movimentam, Espaço Atira, CTRL Bate</div>
      <button id="startBtn" type="button">Iniciar</button>
    </div>

    <script type="module" src="./js/main.js"></script>
  </body>
</html>